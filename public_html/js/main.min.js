function App(){this.initialEvents=[],this.children={}}function Editorial(){this.FIXED_TOP=190}function Intro(){this.skipped=!1,this.timeoutIds=[],this.delays={posters:5e3,flags:11e3,logo:17e3}}document.documentElement.className="js",Object.defineProperty(App.prototype,"dispatchEvent",{value:function(t){var e,i=Array.from(arguments).slice(1);t in this&&this[t].apply(this,i);for(var n in this.children)e=Array.isArray(this.children[n])?this.children[n]:[this.children[n]],e.filter(function(e){return t in e&&"function"==typeof e[t]}).forEach(function(e){e[t].apply(e,i||[])})}}),Object.defineProperty(App.prototype,"addChild",{value:function(t,e){if(t in this.children)throw"Name already taken.";this.children[t]=e,this.initialEvents.forEach(function(i){t in e&&"function"==typeof e[t]&&e[t].call(e)})}}),App.instance=new App,Object.defineProperty(Editorial.prototype,"init",{value:function(){this.fixed=document.getElementById("fixed-issue-section"),this.sections=Array.from(document.getElementsByClassName("issue-section")).filter(function(t){return""==t.id})}}),Object.defineProperty(Editorial.prototype,"resize",{value:function(){this.sections.forEach(function(t){t.children[1].style.height=Math.max.apply(window,Array.from(t.children).map(function(t){return t.offsetHeight}))+"px"})}}),Object.defineProperty(Editorial.prototype,"hide",{value:function(t){this.fixed.children[t].classList.remove("visible"),this.sections[t].children[0].classList.remove("hidden")}}),Object.defineProperty(Editorial.prototype,"show",{value:function(t){this.fixed.children[t].classList.add("visible"),this.sections[t].children[0].classList.add("hidden")}}),Object.defineProperty(Editorial.prototype,"ahead",{value:function(t){this.hide(t),this.sections[t].classList.remove("behind")}}),Object.defineProperty(Editorial.prototype,"behind",{value:function(t){this.hide(t),this.sections[t].classList.add("behind")}}),Object.defineProperty(Editorial.prototype,"scroll",{value:function(){var t=NaN;this.sections.forEach(function(e,i){if(i>t)return this.ahead(i);var n=e.getBoundingClientRect(),o=this.FIXED_TOP+this.sections[i].children[0].offsetHeight;return n.top<=this.FIXED_TOP&&n.bottom>o&&(t=i,this.show(i)),n.top>this.FIXED_TOP?this.ahead(i):n.bottom<=o?this.behind(i):void 0}.bind(this))}}),App.instance.addChild("editorial",new Editorial),Object.defineProperty(Intro.prototype,"load",{value:function(t){this.show("intro-fade");for(var e in this.delays)this.hideOne("."+e,this.delays[e])}}),Object.defineProperty(Intro.prototype,"click",{value:function(t){if(!this.skipped){for(;this.timeoutIds.length;)clearTimeout(this.timeoutIds.pop());document.body.classList.add("skip-intro"),this.skipped=!0}}}),Object.defineProperty(Intro.prototype,"show",{value:function(t){Array.from(document.getElementsByClassName(t)).forEach(function(t){t.classList.add("visible")})}}),Object.defineProperty(Intro.prototype,"hide",{value:function(t){Array.from(document.getElementsByClassName(t)).forEach(function(t){t.classList.remove("visible")})}}),Object.defineProperty(Intro.prototype,"hideOne",{value:function(t,e){var i=document.querySelector(t);i&&this.timeoutIds.push(setTimeout(function(){i.classList.remove("visible")},e))}}),App.instance.addChild("intro",new Intro),Object.defineProperty(App.prototype,"bootstrap",{value:function(){switch(document.readyState){case"complete":this.dispatchEvent("init"),this.dispatchEvent("load");break;case"interactive":this.dispatchEvent("init"),this.addEventListener("load",void 0,window);break;default:this.addEventListener("DOMContentLoaded","init"),this.addEventListener("load",void 0,window)}}}),Object.defineProperty(App.prototype,"addEventListener",{value:function(t,e,i){(i||document).addEventListener(t,function(i){this.dispatchEvent(e||t,i)}.bind(this))}}),Object.defineProperty(App.prototype,"init",{value:function(){this.initialEvents.push("init"),this.scrollData={before:window.scrollY},this.addEventListener("click"),this.addEventListener("resize",void 0,window),this.addEventListener("scroll",void 0,window)}}),Object.defineProperty(App.prototype,"load",{value:function(){this.initialEvents.push("load"),this.initialEvents.push("resize"),document.body.className+=" content-loaded",setTimeout(function(){this.dispatchEvent("resize")}.bind(this),100),setTimeout(function(){this.dispatchEvent("scroll")}.bind(this),200)}}),Object.defineProperty(App.prototype,"resize",{value:function(){this.dimensions={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}}),Object.defineProperty(App.prototype,"scroll",{value:function(t){t&&t.target!==document&&t.target!==window||(this.scrollData.before===window.scrollY&&(this.scrollData.before=0),this.scrollData.current=window.scrollY)}}),Object.defineProperty(App.prototype,"click",{value:function(t){}}),App.instance.bootstrap();