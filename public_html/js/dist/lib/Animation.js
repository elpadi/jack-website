define([],function(){function Animation(initialValue,finalValue,duration,applyValue,onEnd){this.initialValue=initialValue;this.finalValue=finalValue;this.valueChange=finalValue-initialValue;if(duration!==undefined)this.duration=duration;if(applyValue!==undefined)this.applyValue=applyValue;if(onEnd!==undefined)this.onEnd=onEnd}Animation.prototype.duration=1e3;Animation.prototype.isStopped=true;Animation.prototype.onEnd=function(){};Animation.prototype.applyValue=function(){};Animation.prototype.easing=function(timeElapsed,initialValue,valueChange,duration){return valueChange*(timeElapsed/duration)+initialValue};Animation.prototype.end=function(){this.applyValue(this.finalValue);this.onEnd()};Animation.prototype.stop=function(makeAnimationEnd){this.isStopped=true;makeAnimationEnd&&this.end()};Animation.prototype.start=function(){this.isStopped=false;this.startTime=Date.now();requestAnimationFrame(this.step.bind(this))};Animation.prototype.step=function(){if(this.isStopped)return;var time=Date.now();if(time>=this.startTime+this.duration){this.end()}else{this.applyValue(this.easing(time-this.startTime,this.initialValue,this.valueChange,this.duration));requestAnimationFrame(this.step.bind(this))}};return Animation});