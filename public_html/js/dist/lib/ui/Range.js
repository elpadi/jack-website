define([],function(){function Range($rangeInput,$valueEl){var _this=this;this.$input=$rangeInput;this.$val=$valueEl;this.isValueInput=this.$val.is("input");this.supportsRange=this.$input[0].type==="range";if(!this.supportsRange){require(["lib/ui/shims/Range"],function(RangeShim){_this.shim=new RangeShim($rangeInput);_this.onReady()})}else{this.onReady()}this.isValueInput&&this.$val.on("change",function(){var value=_this.$val.val();_this.setInputValue(value);_this.onChange&&_this.onChange(value)})}Range.prototype.onReady=function(){this.$input.on("change",_.bind(this.onRangeChange,this));this.$input.val()&&this.setElementValue(this.$input.val())};Range.prototype.getRange=function(){return this[this.supportsRange?"$input":"shim"]};Range.prototype.onRangeChange=function(){var value=this.getRange().val();this.setElementValue(value);this.onChange&&this.onChange(value)};Range.prototype.setInputValue=function(val){this.getRange()?this.getRange().val(val):this.$input.val(val);return this};Range.prototype.setElementValue=function(val){var textValue=this.preRender?this.preRender(val):val;this.isValueInput?this.$val.val(textValue):this.$val.text(textValue);return this};Range.prototype.val=function(val){if(arguments.length<1){return this.getRange().val()}return this.setInputValue(val).setElementValue(val)};return Range});