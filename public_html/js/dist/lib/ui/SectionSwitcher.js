define(["jquery","lib/Events","lib/ui/interface/Easing","lib/ui/interface/Components"],function(jquery,Events,Easing,Components){function SectionSwitcher($container){this.$container=$container;this.$elementsContainer=$container.find(".section-switcher__sections-container");this.$elements=$container.find(".section-switcher__section");this.wrapsAround=$container.data("wraps-around");this.sectionsHide=Boolean($container.data("sections-hide"))}SectionSwitcher.prototype=$.extend({},Easing,Components,Events.prototype);SectionSwitcher.prototype.constructor=SectionSwitcher;SectionSwitcher.prototype.selectedIndex=0;SectionSwitcher.prototype.currentIndex=-1;SectionSwitcher.prototype.sectionsHide=false;SectionSwitcher.prototype.isBusy=false;SectionSwitcher.prototype.resetUI=function(){this.trigger("resetui")};SectionSwitcher.prototype.init=function(){this.trigger("init",this.$container);this.switchByIndex(this.selectedIndex)};SectionSwitcher.prototype.transition=function(newIndex){this.$elements.eq(newIndex).css({position:"relative",display:"block"});this.hideCurrentSection();this.onSwitchEnd(newIndex)};SectionSwitcher.prototype.hideCurrentSection=function(){this.isValidIndex(this.currentIndex)&&this.$elements.eq(this.currentIndex).css({display:"none"})};SectionSwitcher.prototype.getPrevIndex=function(index){if(arguments.length===0){index=this.currentIndex}return this.isValidIndex(index-1)?index-1:false};SectionSwitcher.prototype.getNextIndex=function(index){if(arguments.length===0){index=this.currentIndex}return this.isValidIndex(index+1)?index+1:false};SectionSwitcher.prototype.isValidIndex=function(index){return this.wrapsAround?true:index>=0&&index<this.$elements.length};SectionSwitcher.prototype.validateSwitch=function(newIndex){if(this.isBusy){return false}if(!this.sectionsHide&&newIndex===this.currentIndex){return false}if(!this.isValidIndex(newIndex)){return false}return true};SectionSwitcher.prototype.switchByIndex=function(newIndex){if(!this.validateSwitch(newIndex)){return}this.isBusy=true;if(newIndex!==this.currentIndex){this.trigger("sectionselected",newIndex,this.currentIndex);this.transition(newIndex)}else{this.hideCurrentSection();this.onSwitchEnd(-1)}};SectionSwitcher.prototype.getElementByName=function(name){return this.$elements.filter(function(i,el){return el.getAttribute("data-section-name")===name})};SectionSwitcher.prototype.switchByHash=function(hash){var $el=hash[0]==="#"?$(hash):this.getElementByName(hash);this.switchByIndex(this.$elements.index($el))};SectionSwitcher.prototype.switchToNext=function(){this.switchByIndex(this.currentIndex+1)};SectionSwitcher.prototype.switchToPrev=function(){this.switchByIndex(this.currentIndex-1)};SectionSwitcher.prototype.onSwitchEnd=function(newIndex){this.trigger("sectionswitched",newIndex,this.currentIndex);this.isBusy=false;this.currentIndex=newIndex};SectionSwitcher.prototype.getCurrentSection=function(){return this.$elements.eq(this.currentIndex)};SectionSwitcher.prototype.events=["init","sectionselected","sectionswitched"];return SectionSwitcher});