define(["jquery","hoverintent","lib/functions"],function(jquery,hoverintent,fn){return function ExpandOnHover(followHandleClicks){var feature={properties:{hideTimeoutId:0,hideTimeoutDuration:200},hideSubmenu:function($submenu){clearTimeout(this.hideTimeoutId);this.hideTimeoutId=setTimeout(_.bind($.fn.removeClass,$submenu,this.SUBMENU_EXPANDED_CLASSNAME),this.hideTimeoutDuration)},showSubmenu:function($submenu){clearTimeout(this.hideTimeoutId);$submenu.addClass(this.SUBMENU_EXPANDED_CLASSNAME)},onSubmenuHandleClick:function(e,$handle,$submenu){!followHandleClicks&&e.preventDefault();return!!followHandleClicks},init:function(){var _this=this;var show=function($submenu){_this.hideOtherSubmenus($submenu);_this.showSubmenu($submenu)};var hide=function($submenu){_this.hideSubmenu($submenu)};this.$container.find(".dropdown-menu__submenu-handle").each(function(i,el){var $handle=$(el);var $submenu=_this.getSubmenuByHandle($handle);var showSubmenu=fn.curry(show,$submenu);var hideSubmenu=fn.curry(hide,$submenu);$handle.hoverIntent({over:showSubmenu,out:hideSubmenu});$submenu.on("mouseenter",function(){setTimeout(function(){clearTimeout(_this.hideTimeoutId)},_this.hideTimeoutDuration/2);$submenu.one("mouseleave",hideSubmenu)})})}};return feature}});