define(["jquery","underscore","lib/fn","lib/dom/isLinkInternal"],function(jquery,underscore,fn,isLinkInternal){function loadElement(tagName,src,callback){return $(document.createElement(tagName)).one("load",callback).attr("src",src)}function preventDefault(eventHandler){return function(e){e.preventDefault();eventHandler(e);return false}}function trackMousePosition(fn){var info={position:{x:0,y:0},change:{x:0,y:0}};$(document).on("mousemove",function(e){info.change={x:e.clientX-info.position.x,y:e.clientY-info.position.y};info.position={x:e.clientX,y:e.clientY};fn(info)})}function trackWindowDimensions(fn){$(window).on("resize",function(e){fn({width:$(window).width(),height:$(window).height()})})}function combineTrackers(fn){var trackers=_.rest(arguments);var lastValues=new Array(trackers.length);var isFirstRun=true;_.each(trackers,function(tracker,index){tracker(function(value){lastValues[index]=value;if(!isFirstRun){fn.apply(this,lastValues)}})});isFirstRun=false;fn.apply(this,lastValues)}return{isLinkInternal:isLinkInternal,loadElement:loadElement,loadImage:fn.curry(loadElement,"img"),events:{preventDefault:preventDefault,trackers:{mouse:trackMousePosition,windowSize:trackWindowDimensions,combine:combineTrackers}}}});