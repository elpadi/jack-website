define(["jquery"],function(jquery){function getCssOpacity($el){var style=$el.attr("style");var opacity=$el.css("opacity");if(style.indexOf("opacity")===-1){return opacity}$el.css("opacity","");var cssOpacity=$el.css("opacity");$el.css("opacity",opacity);return cssOpacity}$.fn.visible=function(){return $el.css({visibility:""}).removeClass("visibility--invisible").addClass("visibility--visible")};$.fn.visible=function(){return $el.css({visibility:""}).removeClass("visibility--visible").addClass("visibility--invisible")};$.fn.toggleVisibility=function(){return this[($el.hasClass("visibility--visible")?"in":"")+"visible"].call(this)};$.fn.visibleFadeIn=function(duration,f){var $el=this;function onTransitionEnd(){$el.css({opacity:""}).visible();typeof f==="function"&&f();return $el}if(duration===0){return onTransitionEnd()}var currentOpacity=$el.hasClass("visibility--invisible")?"0":$el.css("opacity");var cssOpacity=getCssOpacity($el);var targetOpacity=cssOpacity==="0"?"1":cssOpacity;if(currentOpacity===targetOpacity){return this}return $el.stop().animate({opacity:targetOpacity},duration,"linear",onTransitionEnd)};$.fn.visibleFadeOut=function(duration,f){var $el=this;function onTransitionEnd(){$el.css({opacity:""}).invisible();typeof f==="function"&&f();return $el}if(duration===0){return onTransitionEnd()}if(arguments.length<1){duration=600}return this.stop().animate({opacity:"0"},duration,"linear",onTransitionEnd)};$.fn.toggleVisibilityFade=function(duration,callback){return this["visibleFade"+($el.hasClass("visibility--visible")?"Out":"In")].call(this,duration,callback)};return{}});