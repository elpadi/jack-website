(function(){var _=require("../plugins/underscore");require("./underscore.extra").underscore_mixins(_);var fns=require("./Functions");var ops=require("./Operators");var bin_operators=[[">=",ops.Numeric.greaterThanOrEqual],[">",ops.Numeric.greaterThan],["<=",ops.Numeric.lessThanOrEqual],["<",ops.Numeric.lessThan],["!=",ops.notEqual]];var getPatternComparator=function(pattern){var equal=fns.curry(ops.equal,pattern);return typeof pattern==="string"?_.onMatch(_.pluck(bin_operators,0),function(op){return pattern.indexOf(op)===0},function(op,index){return fns.curry(fns.flip(bin_operators[index][1]),parseFloat(pattern.substr(op.length)))},function(){return equal}):equal};var isMatch=function(arg,pattern){return getPatternComparator(pattern)(arg)};var getMatch=function(arg,patternsAndFns){var index=_.findIndex(_.pluck(patternsAndFns,0),fns.curry(isMatch,arg));return index!==-1?patternsAndFns[index][1]:function(){throw new TypeError("Argument does not match any pattern.")}};var create=function(){var patternsAndFns=_.toArray(arguments);return function(arg){return getMatch(arg,patternsAndFns)(arg)}};exports.create=create;exports.test={getPatternComparator:getPatternComparator,isMatch:isMatch,getMatch:getMatch}})();