define([],function(){function linear(timeElapsed,initialValue,valueChange,duration){return valueChange*(timeElapsed/duration)+initialValue}function cubicEaseOut(timeElapsed,initialValue,valueChange,duration){var time_ratio=timeElapsed/duration-1;return valueChange*(time_ratio*time_ratio*time_ratio+1)+initialValue}function stop(finalValue,applyValue,options){options=_.extend({setFinalValue:false},options);if(options.setFinalValue){applyValue(finalValue)}}function animationStep(fn,delay,duration,onStop,onEnd){var gotKilled=false;var startTime=new Date;var stop=function(options){gotKilled=true;onStop(options)};(function step(){var currentTime=new Date;var timeElapsed=currentTime.getTime()-startTime.getTime();if(gotKilled){return null}if(timeElapsed<=duration){fn(timeElapsed);return setTimeout(step,delay)}onEnd()})();return stop}function animate(initialValue,finalValue,duration,getNewValue,applyValue,callback){return animationStep(compose(applyValue,getNewValue),1e3/24,duration,curry(stop,finalValue,applyValue),function(){applyValue(finalValue);callback()})}return{easing:{linear:linear,out:{cubic:cubicEaseOut}},animate:animate}});