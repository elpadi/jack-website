{% block doctype %}
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
{% endblock %}
	<head>
	{% block head %}
			<meta charset="utf-8">
			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<title>{{ BASE_TITLE }}{{ title }}</title>
			<meta name="description" content="The Jack Mag. Seasonal poster size magazine. The best of the best of each season.">
			<meta name="viewport" content="width=device-width, initial-scale=1">

			<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
			<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
			
			<link rel="stylesheet" href="{{ (PATH_PREFIX ~ 'css/' ~ STYLES_DIR ~ '/main.css') | asset_url }}" media="all">
			<link rel="stylesheet" href="{{ (PATH_PREFIX ~ 'css/' ~ STYLES_DIR ~ '/sections/' ~ section ~ '.css') | asset_url }}" media="all">
			<link rel="stylesheet" href="{{ (PATH_PREFIX ~ 'css/' ~ STYLES_DIR ~ '/pages/' ~ page ~ '.css') | asset_url }}" media="all">
			{% if IS_LOCAL and DEBUG %}
			<script src="{{ PATH_PREFIX }}js/src/bower_components/modernizr/modernizr.js"></script>
			{% else %}
			<script src="{{ PATH_PREFIX ~ 'js/dist/vendor/modernizr.js' | asset_url }}"></script>
			{% endif %}
			<script>window.onload = function() { document.body.className += ' content-loaded'; };</script>
	{% endblock %}
	</head>
	<body class="os-{{ user_agent.operating_system }} browser-{{ user_agent.browser_name }} version-{{ user_agent.browser_version }} section-{{ section }} page-{{ page }}">
		<div id="container">
			{% if CAN_ACCESS_ADMIN %}
			<a id="admin-link" class="button" href="{{ urlFor('admin') }}">Admin section</a>
			{% endif %}
			<header id="masthead">
				<h1>Jack</h1>
			</header>
			{% block header %}
			{% endblock %}
			{% block notice %}
			<div id="notices">
				{% if flash.info %}<p class="info">{{ flash.info }}</p>{% endif %}
				{% if flash.error %}<p class="error">{{ flash.error }}</p>{% endif %}
				{% for e in errors %}
				<p class="error">{{ e }}</p>
				{% endfor %}
			</div>
			{% endblock %}
			<div id="content">
				{% block content %}
				{% endblock %}
			</div>
		</div>
		{% block footer %}
		<div id="main-loader" class="loader">
			<svg viewBox="0 0 90 100" preserveAspectRatio="xMidYMid meet">
				<circle class="one" cx="5" cy="50" r="5"/>
				<circle class="two" cx="25" cy="50" r="5"/>
				<circle class="three" cx="45" cy="50" r="5"/>
				<circle class="four" cx="65" cy="50" r="5"/>
				<circle class="five" cx="85" cy="50" r="5"/>
			</svg>
		</div>
		{% endblock %}
		<script>var RJS_MAIN = 'main';</script>
		{% if IS_LOCAL and DEBUG %}
		<script src="{{ PATH_PREFIX }}js/src/bower_components/requirejs/require.js" data-main="{{ PATH_PREFIX }}js/src/rjs.init"></script>
		{% else %}
		<script src="{{ PATH_PREFIX }}js/dist/vendor/require.js" data-main="{{ PATH_PREFIX }}js/dist/rjs.init"></script>
		{% endif %}
		<script>
			var _paq = _paq || [];
			_paq.push(['setCustomVariable', 1, 'User ID', '{{ USER_ID }}', 'visit']);
			_paq.push(['setCustomVariable', 2, 'Name', '{{ NAME }}', 'visit']);
			_paq.push(['trackPageView']);
			_paq.push(['enableLinkTracking']);
			(function() {
				 var u=(("https:" == document.location.protocol) ? "https" : "http") + "://" + "{{ PIWIK_URL }}";
				 _paq.push(['setTrackerUrl', u+'piwik.php']);
				 _paq.push(['setSiteId', 1]);
				 var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
				 g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
			 })();
		</script>
	</body>
</html>
